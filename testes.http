# Define uma vari√°vel para o seu Nginx (que roda na porta 80)
@host = http://localhost

# ===================================================
#           SERVI√áO DE USU√ÅRIOS
# ===================================================

### 1A: Registrar um novo usu√°rio
# Primeiro, crie um usu√°rio para poder fazer login.
# @name registerUser
POST {{host}}/api/users
Content-Type: application/json

{
  "name": "Usuario de Teste",
  "email": "teste@exemplo.com",
  "password": "senha123"
}

### 1B: Fazer Login (e Salvar o Token)
# Agora, fa√ßa login com o usu√°rio que voc√™ acabou de criar.
# @name loginUser
POST {{host}}/api/users/login
Content-Type: application/json

{
  "email": "teste@exemplo.com",
  "password": "senha123"
}

### <-- üëá ADICIONE ESTE SEPARADOR AQUI
# Esta linha de script DEVE vir DEPOIS de um separador ###
@authToken = {{loginUser.response.body.token}}


### 1C: Listar TODOS os usu√°rios (O SEU TESTE)
# Endpoint: GET /api/users
# Agora este request vai funcionar, pois {{authToken}} foi preenchido.
GET {{host}}/api/users
Authorization: Bearer {{authToken}}


# ===================================================
#           SERVI√áO DE RESERVAS (TESTE DO LOCK)
# ===================================================

### 2A: Criar uma nova reserva
# Este √© o teste para a Exclus√£o M√∫tua (Lock).
POST {{host}}/api/reservas
Content-Type: application/json
Authorization: Bearer {{authToken}}

{
  "room_id": "sala_101",
  "start_time": "2025-11-20T14:00:00",
  "end_time": "2025-11-20T15:00:00"
}